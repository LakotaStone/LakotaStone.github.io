// ====== DROPDOWN MENU BEHAVIOR (HOVER TO OPEN) ======
document.querySelectorAll(".dropdown").forEach(dropdown => {
    dropdown.addEventListener("mouseenter", function () {
        this.querySelector(".dropdown-menu").classList.add("active");
    });
    dropdown.addEventListener("mouseleave", function () {
        this.querySelector(".dropdown-menu").classList.remove("active");
    });
});

// ====== Quantity Selector ======
const quantityInput = document.getElementById("quantity");
const addToCartButton = document.querySelector(".add-to-cart");

// ====== Ensure Quantity is Valid ======
if (quantityInput) {
    quantityInput.addEventListener("input", () => {
        if (quantityInput.value < 1) {
            quantityInput.value = 1;
        }
    });
}

// ====== Image Switcher on Thumbnail Click ======
function changeImage(src) {
    document.getElementById("main-image").src = src;
}

// ====== ADD TO CART FUNCTION (INTEGRATED WITH LOCAL STORAGE) ======
if (addToCartButton) {
    addToCartButton.addEventListener("click", () => {
        const name = document.querySelector(".product-details h1").textContent;
        const price = parseFloat(document.querySelector(".price").textContent.replace("$", ""));
        const quantity = parseInt(quantityInput.value);

        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        let existingItem = cart.find(item => item.name === name);

        if (existingItem) {
            existingItem.quantity += quantity;
        } else {
            cart.push({ name, price, quantity });
        }

        localStorage.setItem("cart", JSON.stringify(cart));
        updateCartDisplay();
        alert(`Added ${quantity} ${name}(s) to your cart.`);
    });
}

// ====== CART COUNT UPDATE ======
const cartNumber = document.getElementById("cart-count");
function updateCartDisplay() {
    const cart = JSON.parse(localStorage.getItem("cart")) || [];
    const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
    cartNumber.textContent = totalItems;
}
updateCartDisplay();
